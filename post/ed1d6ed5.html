<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/blog/crown.png"><link rel="icon" type="image/png" href="/img/blog/crown.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><meta name="theme-color" content="#2f4154"><meta name="description" content="Nothing is so common as the wish to be remarkables"><meta name="author" content="Bryce Huang"><meta name="keywords" content="blog,program,life"><title>终端那些事 - Bryce&#39;s Club</title><link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/10.0.0/styles/dracula.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_fmb4a04yx8h.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_pjno9b9zyxs.css"><link rel="stylesheet" href="https://cdn.staticfile.org/gitalk/1.6.2/gitalk.css"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/css/custom.css"><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="Bryce's Club" type="application/atom+xml"></head><body><div id="dark" onclick="switchDarkMode()"></div><script>var isNight=18<=(new Date).getHours()||(new Date).getHours()<8;(matchMedia("(prefers-color-scheme: dark)").matches||isNight||"1"===localStorage.getItem("dark"))&&(isNight&&"1"===localStorage.getItem("noDark")||document.body.classList.add("dark")),document.getElementById("dark").innerHTML=document.querySelector("body").classList.contains("dark")?"🌙":"🌞"</script><header style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/">&nbsp;<strong>Bryce's Club</strong>&nbsp;</a> <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-home-fill"></i> 首页</a></li><li class="nav-item"><a class="nav-link" href="/archives/"><i class="iconfont icon-archive-fill"></i> 归档</a></li><li class="nav-item"><a class="nav-link" href="/categories/"><i class="iconfont icon-category-fill"></i> 分类</a></li><li class="nav-item"><a class="nav-link" href="/tags/"><i class="iconfont icon-tags-fill"></i> 标签</a></li><li class="nav-item"><a class="nav-link" href="/links/"><i class="iconfont icon-link-fill"></i> 友链</a></li><li class="nav-item"><a class="nav-link" href="/messageboard/"><i class="iconfont icon-speakernotes"></i> 留言</a></li><li class="nav-item"><a class="nav-link" href="/features/"><i class="iconfont icon-exp-fill"></i> 功能</a></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-user-fill"></i> 关于</a></li><li class="nav-item" id="search-btn"><a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;&nbsp;<i class="iconfont icon-search"></i>&nbsp;&nbsp;</a></li></ul></div></div></nav><div class="view intro-2" id="background" parallax="true" style="background:url(/img/star-guardian/champion-pajama-group-splash.webp) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="container text-center white-text fadeInUp"><span class="h2" id="subtitle"></span><div class="mt-3 post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2021-12-02 16:08">星期四, 十二月 2日 2021, 4:08 下午</time></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 3k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 32 分钟</span></div></div></div></div></div></header><main><div class="container-fluid"><div class="row"><div class="d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-md"><div class="container nopadding-md" id="board-ctn"><div class="py-5" id="board"><div class="post-content mx-auto" id="post"><article class="markdown-body"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>最近在学习和处理终端的输入和输出以及命令拦截问题，但终端在编程里属于比较小众的领域，比较有名的类库不多，比如 go 的 <a href="https://github.com/c-bata/go-prompt" target="_blank" rel="noopener">go-prompt</a>、<a href="https://github.com/nsf/termbox-go" target="_blank" rel="noopener">termbox-go</a>、<a href="https://github.com/creack/pty" target="_blank" rel="noopener">pty</a> 以及 ts 的 <a href="https://github.com/xtermjs/xterm.js" target="_blank" rel="noopener">xterm.js</a>。</p><p>不同的终端，在处理输入和输出时，所对应的数据也不一样，以及存在跨平台等问题。总得来说跟终端打交道，就是一件苦差事，不过有这么多优秀的开源类库，让我们在了解和处理终端问题时，提供了和很好的思路。</p><h2 id="终端的介绍"><a href="#终端的介绍" class="headerlink" title="终端的介绍"></a>终端的介绍</h2><p>终端（英语：Computer terminal），是一台电脑或者计算机系统，用来让用户输入数据，及显示其计算结果的机器，简而言之就是人类用户与计算机交互的设备。终端有些是全电子的，也有些是机电的。其又名终端机，它与一部独立的电脑不同，但也是电脑组成的部分。– by <a href="https://zh.wikipedia.org/wiki/%E7%B5%82%E7%AB%AF" target="_blank" rel="noopener">wiki</a></p><h3 id="终端的种类"><a href="#终端的种类" class="headerlink" title="终端的种类"></a>终端的种类</h3><h3 id="硬件终端"><a href="#硬件终端" class="headerlink" title="硬件终端"></a>硬件终端</h3><p>终端其实就是一种输入输出设备，相对于计算机主机而言属于外设，本身并不提供运算处理功能。早期的计算机终端一般是机电的电传打字机，比如ASR33。但是对于大多数应用来说它们太慢了，在卡片或磁带等物理性的材料上标记好资料之后，放入计算机再印出结果，过程非常费工。1970年代初许多电脑公司认识到电视输入终端比穿孔卡片要好得多，而且可以使得计算机更加容易与用户互动，产生新的应用。当时的毛病在于相对于当时的小型计算机来说要显示一页文字所需要的内存太大了。在集成电路普及以前要显示电视信号所需要的速度对当时的逻辑门所提出的技术挑战也太高了。当时有一家公司宣布要生产一台价值15,000美元的视频终端，吸引了许多购户，但是最后它的工程师们决定这个计划无法完成。另一个解决方法是泰克公司发明的存储管，这台机器可以显示输出给它的信息，但是无法刷新。</p><p>约1982年左右的一台ASCII视频终端<br>后来输出端的显示功能被发展出来后，早期的视频终端使用特别的逻辑门，没有自己的中央处理器。发展微处理器的动机之一就是要简化终端里的电子组件的复杂性。大多数终端的屏幕是绿色或者橙色的，它们与大型计算机相连。典型的终端使用RS-232之类的串行数据通信与主机相连，IBM使用它自己的系统网络体系结构协议通过同轴电缆来连接其主机与终端。</p><p>最后所谓的智能终端（如VT52和VT100）被引入。今天依然有许多这两个终端的模拟软件。这些终端之所以被称为“智能”是因为它们理解转义序列，可以定位光标和控制显示位置，这样设计的终端很容易操作，已经有现代电脑的样子了。重要的非VT100终端有IBM 3270、不同的慧智模型和Tektronix 4014。1970年代里世界上有十数个终端生产商，大多数终端的指令不兼容。1970年代和1980年代初最重要的终端生产商有迪吉多、慧智、Televideo、利尔·西格勒公司和Heathkit。</p><p>早期的IBM个人计算机虽然也使用绿色的屏幕，但是它不算终端。个人计算机的屏幕不包括任何产生字母的硬件，所有的视频信号是在个人计算机的显卡里产生的。但是使用相应的模拟程序一台个人计算机可以与大型计算机相连模拟终端。使用微处理器的个人计算机大大地取消了对终端的需要，人与电脑的接触直接用图像的操作系统来代劳了。但今天大多数个人计算机的Telnet用户端仍提供最普遍的终端（一般VT100）的模拟，但这不是真正的物理终端。</p><h4 id="图形终端"><a href="#图形终端" class="headerlink" title="图形终端"></a>图形终端</h4><p>有些终端不但可以显示文字，而且可以显示矢量图形和位图。计算机向终端输出绘图指令，终端则向计算机输送用户输入（通过键盘或者定位设备）。</p><p>事实上今天过去简单的图形终端已经完全被全功能视频显示器代替了。今天在计算机中图形用户界面无处不在。大多数终端模拟程序是在图形环境内运行的。我们现在主要是透过这些辅助工具，已经很少有直接终端的存在。</p><p>X终端是专门给X窗口系统设计的图形终端，提供连接到服务器系统上运行的KDE、GNOME或其它基于X窗口系统的平台的可能性。</p><h4 id="虚拟终端"><a href="#虚拟终端" class="headerlink" title="虚拟终端"></a>虚拟终端</h4><p>由于个人电脑的普及今天已经很少有专门的计算机终端作为界面了。现代的操作系统如Linux和BSD及其派生物使用与硬件基本无关的虚拟终端。输出系统一般是屏幕，输入系统则是键盘。</p><p>在使用X窗口系统这样的图形用户界面时在屏幕上一般有多个与不同应用相关的窗口开着，而不是只有一个与一个单个过程相连的文字流。在这种情况下用户一般使用终端模拟程序。这样用户可以不必使用专门的终端设备来与计算机交换。</p><p>虚拟终端机（英语：Terminal emulator）是在个人电脑上虚拟的一个终端以及为此目的而写的软件。虚拟终端的目的是达到个人电脑及其用户能够与大型计算机的连接。一般来说需要连接的大型计算机是IBM的大型计算机或者所谓的超小型计算机（过去往往是迪吉多的VAX）。</p><p>虚拟终端使得个人电脑的用户可以直接使用他的个人电脑来与大型计算机联系，而不必使用专门的终端。</p><p>通过虚拟终端的软件虚拟终端还可以扩展大型计算机的标准终端的功能，通过虚拟终端不但可以将个人电脑上的数据传递给大型计算机，而且还可以将大型计算机的数据传递给个人电脑，并在个人电脑上继续加工。</p><p>一般大型计算机的终端是字母式的输入和输出接口，因此一个虚拟终端至少需要一个能够模拟这样的字母式（比如ASCII）输入和输出接口的能力。最常见的平台是图像式的用户表面。要使得新的、图像式的程序能够使用老的字母式的或者没有图像式输入和输出能力的程序也需要虚拟终端。</p><p>现代的大型计算机也内部使用虚拟终端，这样它们可以向老的、需要终端的程序假装一个终端，而实际上它则将程序的显示转到显卡上。比如Linux以及其它大多数基于个人电脑的类似Unix的操作系统假装有六至十个这样的“虚拟”的终端。</p><h3 id="使用go处理终端的输入和输出"><a href="#使用go处理终端的输入和输出" class="headerlink" title="使用go处理终端的输入和输出"></a>使用go处理终端的输入和输出</h3><p>通常，如果我们需要设计和使用一种终端，比如拦截终端命令，执行命令前检查文件大小，设置命令白名单拒绝高危命令。</p><h4 id="xterm"><a href="#xterm" class="headerlink" title="xterm"></a>xterm</h4><p>xterm是一个X Window System上的标准虚拟终端。用户可以在同一个显示器上开启许多xterm，每一个都为其中运行的进程提供独立的输入输出（一般来说此进程是Unix shell）。</p><p>xterm 最先是Jim Gettys的学生Mark Vandevoorde在1984年夏天为VS100写的独立虚拟终端，当时X的开发才刚刚开始。很快人们就发现它作为X的一部分比作为独立的程序更为有用，于是它开始针对X而开发。Gettys曾讲述过有关的故事 ，“xterm内部如此恐怖的部分原因，是最初想法把它作为单独进程驱动多个VS100显示窗。”（”part of why xterm’s internals are so horrifying is that it was originally intended that a single process be able to drive multiple VS100 displays.”）</p><p>在作为X参考实现的一个部分后多年，1996年左右，开发的主干转移至了XFree86（从X11R6.3版本派生出来），现在由Thomas Dickey维护。</p><p>有许多xterm变体可用。大多数的X虚拟终端都是从xterm的变体起步的。</p><p>我们目前都基于xterm处理。</p><h3 id="处理终端的输入"><a href="#处理终端的输入" class="headerlink" title="处理终端的输入"></a>处理终端的输入</h3><p>在go中，有许多方式可以获取用户的输入，通过Scan获取输入、bufio标准输入,这里我们说一个常用的方式：bufio，实时读取键盘输入的每个字符。</p><div class="hljs"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">read</span><span class="hljs-params">( c <span class="hljs-keyword">chan</span> <span class="hljs-keyword">rune</span>)</span></span>&#123;
 buf := bufio.NewReader(os.Stdin)
   <span class="hljs-keyword">for</span> &#123;
    r, n, err := buf.ReadRune()
   
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;
     err := fmt.Errorf(<span class="hljs-string">"exit read stdin loop as err:%v"</span>err)
     log.Debugf(err.Error())
     <span class="hljs-keyword">return</span>
    &#125;
    log.Debugf(<span class="hljs-string">"receive input:%v, string:%s"</span>, r, <span class="hljs-keyword">string</span>(r))
    <span class="hljs-keyword">if</span> n &gt; <span class="hljs-number">0</span> &#123;
   
     c &lt;- r
    &#125;
   &#125;
&#125;</code></pre></div><p>这已经能够满足大部分场景下的需求了，但是没能真正满足终端的需求，在命令过长导致换行的时候，这种做法会导致命令被截断，而不能有效被读取。</p><p>这里提供另外一种,可以更好的控制输入的力度内容：</p><div class="hljs"><pre><code class="hljs go"> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">read</span> <span class="hljs-params">(cb <span class="hljs-keyword">chan</span> <span class="hljs-keyword">byte</span>[])</span></span> &#123;

   <span class="hljs-keyword">var</span> ttystate *unix.Termios

   <span class="hljs-comment">//Get terminal settings</span>

   ttystate, err := termios.Tcgetattr(<span class="hljs-keyword">uintptr</span>(syscall.Stdin))

   <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;
    log.Debugf(err.Error())
      <span class="hljs-keyword">return</span>
  &#125;
    setNonCanonicalMode(ttystate)

    buf := <span class="hljs-built_in">make</span>([]<span class="hljs-keyword">byte</span>, <span class="hljs-number">1024</span>)

    <span class="hljs-keyword">for</span> &#123;
      <span class="hljs-keyword">if</span> n, err := syscall.Read(syscall.Stdin, buf); err == <span class="hljs-literal">nil</span> &#123;
        cb &lt;- buf[:n]
      &#125;
    &#125;

  &#125;
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">setNonCanonicalMode</span><span class="hljs-params">(attr *unix.Termios)</span></span> &#123;

<span class="hljs-comment">//Disable canonical mode (canonical mode disabled)&amp;^ AND NOT)</span>
attr.Lflag &amp;^= syscall.ICANON

<span class="hljs-comment">//Minimum number of characters when reading=One character</span>
attr.Cc[syscall.VMIN] = <span class="hljs-number">1</span>

<span class="hljs-comment">//Timeout time when reading non-canonical= 0</span>
attr.Cc[syscall.VTIME] = <span class="hljs-number">0</span>

<span class="hljs-comment">//Reflect the changed settings</span>
termios.Tcsetattr(<span class="hljs-keyword">uintptr</span>(syscall.Stdin), termios.TCSANOW, attr)
&#125;</code></pre></div><p>通过实时获取用户输入，就可以实现客户端的逻辑</p><h3 id="处理终端的输出"><a href="#处理终端的输出" class="headerlink" title="处理终端的输出"></a>处理终端的输出</h3><p>终端的输出是相对比较复杂的，与输入不同，终端输出带有大量的<a href="https://zh.wikipedia.org/wiki/%E6%8E%A7%E5%88%B6%E5%AD%97%E7%AC%A6" target="_blank" rel="noopener">控制字符</a></p><p>我目前没有发现一个标准的表格对照，这也困扰了我很久，因为无法解析输出的内容，会导致无法实现命令白名单功能。无法对命令有效的拦截，经常误杀命令。</p><p>最后在github,找到这个类库，基本能够实现解析终端的输出为最终的命令 <strong><a href="https://github.com/LeeEirc/terminalparser" target="_blank" rel="noopener">terminal parse</a></strong></p><p>使用方法也很简单，在用户输入之后，将终端返回的内容缓存起来，当用户敲回车时，将缓存的内容使用这个解析器解析即可得到，这个解析器无法处理命令过长导致换行的问题，所以在处理之前需要将终端的换行符<code>\r</code>处理掉</p><div class="hljs"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">parse</span><span class="hljs-params">(p []<span class="hljs-keyword">byte</span>)</span> <span class="hljs-title">string</span></span> &#123;
	<span class="hljs-keyword">defer</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> &#123;
		<span class="hljs-keyword">if</span> r := <span class="hljs-built_in">recover</span>(); r != <span class="hljs-literal">nil</span> &#123;
			log.Logger.Warnf(<span class="hljs-string">" panic: %s\n"</span>, r)
		&#125;
	&#125;()
	s := terminalparser.Screen&#123;
		Rows:   <span class="hljs-built_in">make</span>([]*terminalparser.Row, <span class="hljs-number">0</span>, <span class="hljs-number">1024</span>),
		Cursor: &amp;terminalparser.Cursor&#123;&#125;,
	&#125;
	ss := s.Parse(p)
	<span class="hljs-keyword">return</span> strings.Join(ss, <span class="hljs-string">""</span>)

&#125;</code></pre></div><p>以上,便是我在处理终端问题时，遇到的一些棘手的事情！感谢阅读！</p></article><hr><div><div class="post-metas mb-3"><div class="post-meta mr-3"><i class="iconfont icon-category"></i> <a class="hover-with-bg" href="/categories/program/">program</a></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a class="hover-with-bg" href="/tags/go/">go</a> <a class="hover-with-bg" href="/tags/terminal/">terminal</a></div></div><p class="note note-warning">本博客所有文章除特别声明外，均采用: <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">署名-非商业性使用-禁止演绎 4.0 国际协议</a>，转载请保留原文链接及作者。</p><div class="post-prevnext row"><div class="post-prev col-6"><a href="/post/5ddf423b.html"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">go AES CFB加解密与Java互转</span> <span class="visible-mobile">上一篇</span></a></div><div class="post-next col-6"><a href="/post/e8385125.html"><span class="hidden-mobile">manjaro安装记录</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></div></div></div><div class="comments" id="comments"><div id="vcomments"></div><script defer src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="/js/Valine.min.js"></script><script type="text/javascript">var notify=!1,verify=!1,oldLoadVa=window.onload;window.onload=function(){oldLoadVa&&oldLoadVa(),new Valine({lang:"zh-cn",el:"#vcomments",notify:notify,verify:verify,app_id:"dXhxgFWthuLPDnYYuAJbIe6X-MdYXbMMI",app_key:"In8P9esI1pt8dBUc7JbFCvLa",placeholder:"说点什么",avatar:"/retro",meta:["nick","mail","link"],pageSize:"10",emoticon_url:"/emoji",emoticon_list:["动耳朵.gif","抖脚脚.gif","抖眼.gif","抖眼镜.gif","风吹秀发.gif","慌张.gif","夹住.gif","开车.gif","哭唧唧.gif","绿色的.gif","跳舞.gif","跳着走.gif","小花花.gif","眼睛转.gif","摇头.gif","眨眼.gif","吃东西.gif","弹肚皮.gif","动次打次.gif","比心心.gif","吹风.gif","打篮球.gif","都是小心心.gif","吐.png","喷血.png","狂汗.png","不说话.png","汗.png","坐等.png","献花.png","不高兴.png","中刀.png","害羞.png","皱眉.png","小眼睛.png","中指.png","尴尬.png","瞅你.png","想一想.png","中枪.png","得意.png","肿包.png","扇耳光.png","亲亲.png","惊喜.png","脸红.png","无所谓.png","便便.png","愤怒.png","蜡烛.png","献黄瓜.png","内伤.png","投降.png","观察.png","看不见.png","击掌.png","抠鼻.png","邪恶.png","看热闹.png","口水.png","抽烟.png","锁眉.png","装大款.png","吐舌.png","无奈.png","长草.png","赞一个.png","呲牙.png","无语.png","阴暗.png","不出所料.png","咽气.png","期待.png","高兴.png","吐血倒地.png","哭泣.png","欢呼.png","黑线.png","喜极而泣.png","喷水.png","深思.png","鼓掌.png","暗地观察.png"]})}</script></div></div></div></div></div><div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p><div id="tocbot"></div></div></div></div></div><div class="col-lg-7 mx-auto nopadding-md"><div class="container custom post-content mx-auto"><img src="/images/wechatpay.webp" class="rounded mx-auto d-block mt-5" style="width:120px;height:150px;vertical-align:-webkit-baseline-middle"><br><div style="text-align:center">买个卤蛋，吃根冰棒</div></div></div></main><a id="scroll-top-button" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div><footer class="mt-5"><div class="text-center py-3"><div><svg t="1586793095516" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3553" width="16" height="16"><path d="M512 0c282.7776 0 512 229.2224 512 512s-229.2224 512-512 512S0 794.7776 0 512 229.2224 0 512 0z m0 71.424a440.576 440.576 0 1 0 0 881.152 440.576 440.576 0 0 0 0-881.152z m8.192 166.7072c55.296 0 108.3904 15.5136 153.7536 44.2368a35.7376 35.7376 0 0 1-38.144 60.3648 215.6032 215.6032 0 0 0-115.5584-33.1264c-116.6336 0-210.6368 90.88-210.6368 202.3936s94.0032 202.3936 210.6368 202.3936c41.0112 0 80.2304-11.264 113.8688-32.1024a35.7376 35.7376 0 0 1 37.632 60.7744 287.1296 287.1296 0 0 1-151.552 42.8032c-155.4944 0-282.0608-122.368-282.0608-273.8688 0-151.552 126.5664-273.8688 282.112-273.8688z" fill="#8a8a8a" p-id="3554"></path></svg> <span itemprop="copyrightYear" id="cori">2021</span><br><svg t="1584375698087" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1913" width="23" height="14"><path d="M513.984496 513.984496c141.383442 0 256-114.616558 256-256S655.367938 1.984496 513.984496 1.984496 257.984496 116.601054 257.984496 257.984496s114.616558 256 256 256z m0-59.534884c-108.50431 0-196.465116-87.960806-196.465116-196.465116s87.960806-196.465116 196.465116-196.465116 196.465116 87.960806 196.465116 196.465116-87.960806 196.465116-196.465116 196.465116z" fill="#8a8a8a" p-id="1914"></path><path d="M1020.031008 992.248062c0-281.647628-227.423256-510.015504-508.031008-510.015504S3.968992 710.600434 3.968992 992.248062a29.767442 29.767442 0 1 0 59.534884 0c0-248.820093 200.827039-450.48062 448.496124-450.48062s448.496124 201.660527 448.496124 450.48062a29.767442 29.767442 0 1 0 59.534884 0z" fill="#8a8a8a" p-id="1915"></path></svg> <span class="author" id="cori" itemprop="copyrightHolder">Bryce Huang</span></div></div><script type="text/javascript" src="/js/commentTyping.min.js"></script></footer><script src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js"></script><script src="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/js/bootstrap.min.js"></script><script src="/js/main.js"></script><script src="https://cdn.staticfile.org/tocbot/4.11.1/tocbot.min.js"></script><script>$(document).ready(function(){var t=$("#board-ctn").offset().top;tocbot.init({tocSelector:"#tocbot",contentSelector:".post-content",headingSelector:"h1,h2,h3,h4,h5,h6",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",collapseDepth:6,scrollSmooth:!0,headingsOffset:-t}),0<$(".toc-list-item").length&&$("#toc").css("visibility","visible")})</script><script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js"></script><script src="/js/clipboard-use.js"></script><script src="/js/custom.js"></script><script src="https://cdn.staticfile.org/typed.js/2.0.11/typed.min.js"></script><script>var typed=new Typed("#subtitle",{strings:["  ","终端那些事&nbsp;"],cursorChar:"_",typeSpeed:70,loop:!1});typed.stop(),$(document).ready(function(){$(".typed-cursor").addClass("h2"),typed.start()})</script><script src="/js/local-search.js"></script><script>var path="/local-search.xml",inputArea=document.querySelector("#local-search-input");inputArea.onclick=function(){searchFunc(path,"local-search-input","local-search-result"),this.onclick=null}</script><script src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js"></script><link rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css"><script>$("#post img:not(.no-zoom img, img[no-zoom]), img[zoom]").each(function(){var t=document.createElement("a");$(t).attr("data-fancybox","images"),$(t).attr("href",$(this).attr("src")),$(this).wrap(t)})</script></body></html>